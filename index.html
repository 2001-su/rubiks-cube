<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rubik's Cube </title>
  <style>
    body { font-family: sans-serif; }
    .controls { margin: 10px 0; }
    .cube-grid {
      display: grid;
      grid-template-columns: repeat(12, 30px);
      grid-template-rows: repeat(9, 30px);
      gap: 1px;
      margin-bottom: 20px;
    }
    .cell {
      width: 30px;
      height: 30px;
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <h1>Rubik's Cube (Aligned Net View)</h1>
  <div class="controls">
    <button onclick="scrambleCube()">Scramble</button>
    <button onclick="solveCube()">Solve</button>
  </div>
  <div id="cube" class="cube-grid"></div>
  <pre id="output"></pre>

  <script src="utils.js"></script>
  <script src="cube.js"></script>
  <script>
    let cube;

    function renderAlignedNet(cube) {
      const colorMap = {
        w: 'white', y: 'yellow',
        r: 'red', o: 'orange',
        g: 'green', b: 'blue'
      };

      const grid = Array(108).fill(""); // 9 rows Ã— 12 cols
      const placeFace = (face, rowOffset, colOffset) => {
        cube.faces[face].forEach((color, i) => {
          const row = Math.floor(i / 3);
          const col = i % 3;
          const index = (rowOffset + row) * 12 + (colOffset + col);
          grid[index] = `<div class="cell" style="background:${colorMap[color]}"></div>`;
        });
      };

      // Position each face
      placeFace('U', 0, 3);  // Top-center
      placeFace('L', 3, 0);  // Middle-left
      placeFace('F', 3, 3);  // Middle-center
      placeFace('R', 3, 6);  // Middle-right
      placeFace('B', 3, 9);  // Middle-far-right
      placeFace('D', 6, 3);  // Bottom-center

      document.getElementById("cube").innerHTML = grid.map(c => c || '<div></div>').join('');
    }

    function scrambleCube() {
      cube = new Cube();
      cube.scramble(5);
      renderAlignedNet(cube);
      document.getElementById("output").innerText = "Scrambled!";
    }

    function solveCube() {
      if (!cube) return;
      const steps = cube.solve();
      renderAlignedNet(steps[steps.length - 1].cube);
      let log = "Solve Steps:\\n";
      steps.forEach((s, i) => log += `Step ${i + 1}: ${s.move}\\n`);
      document.getElementById("output").innerText = log;
    }

    window.onload = () => {
      cube = new Cube();
      renderAlignedNet(cube);
    };
  </script>
</body>
</html>
